<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>promise</title>
</head>
<body>
    <script>
        // promises in javascript
        //synchronous vs Asynchronous  code
      //Async

    //   console.log("subham");

    //   setTimeout(()=>{
    //     console.log("shreyansh");
    //   } , 1000);

    //   console.log("gitu");

    // Asnychronous Example
// console.log("start")

// function importantAction(username) {
//     setTimeout(() => {
//       return `Subscribe to ${username}`;
//     }, 1000);
//   }

// const message = importantAction('Roadside Coder');
// console.log(message);

// console.log("stop");


// Callback

// console.log("start")

// function importantAction(username, cb) {
//   setTimeout(() => {
//     cb( `Subscribe to ${username}`);
//   }, 1000);
// }

// importantAction("Roadside Coder", (message) => {
//   console.log(message);
// });

// console.log("stop")


// Callback Hell
// console.log("start")

// function importantAction(username, cb) {
//   setTimeout(() => {
//     cb(`Subscribe to ${username}`);
//   }, 1000);
// }

// function likeTheVideo(video, cb) {
//   setTimeout(() => {
//     cb(`Like the ${video} video`);
//   }, 1000);
// }

// function shareTheVideo(video, cb) {
//   setTimeout(() => {
//     cb(`Share the ${video} video`);
//   }, 1000);
// }

// const message = importantAction("Roadside Coder", (message) => {
//   console.log(message);
//   likeTheVideo("Javascript Interview Questions", (action) => {
//     console.log(action);
//     shareTheVideo("Javascript Interview Questions", (action) => {
//         console.log(action);
//       });
//   });
// }); 

// console.log("stop")


// Promises

//  console.log("start");

//  const sub = new Promise((resolve, reject) => {

//     setTimeout(()=>{
//       const result = true;
//       if(result) resolve("subscribed to Roadsider coder");
//       else reject(new Error("not subscribed to Roadsider coder"));
//     },5000)

//  });

//  sub.then((res) => {
//    console.log(res);
//  }).catch((err) => {
//    console.error(err);
//  });

//  console.log("stop");


// promise que-2

// console.log("start");
// const sub = promise.resolve("subscribed to roadside coder");
// console.log(sub);
// sub.then((res)=> console.log(res)).catch((err)=> console.log("error",err));
// console.log("stop");



// rewritting callbacks

console.log("start");
function importantAction(username) {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      reject(`Subscribe to ${username}`);
    }, 1000);
  });
}

function likeTheVideo(video) {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      resolve(`Like the ${video} video`);
    }, 1000);
  });
}

function shareTheVideo(video) {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      resolve(`Share the ${video} video`);
    }, 1000);
  });
}

importantAction("Roadside Coder").then((res) => {
  console.log(res);
  likeTheVideo("Javascript Interview Questions").then((res) => {
    console.log(res);
    shareTheVideo("Javascript Interview Questions").then((res) => {
      console.log(res);
    });
  });
}).catch(err=>console.log( err))


// Promise Chaining

importantAction("Roadside Coder")

   .then((res) => {
    console.log(res);
    return likeTheVideo("Javascript Interview Questions")
  })
  
  .then((res) => {
    console.log(res);
    return shareTheVideo("Javascript Interview Questions")
  })
  
  .then((res) => {
    console.log(res);
  });
  
  // promise.all
  
    Promise.all([
      importantAction("Roadside Coder"),
      likeTheVideo("Javascript Interview Questions"),
      shareTheVideo("Javascript Interview Questions"),
    ])
    .then((res)=>{
      console.log(res);
    })
    .catch((err)=>{
      console.error( "promises failed" ,err);
    });
    
    console.log("stop");


    Promise.race([
      importantAction("Roadside Coder"),
      likeTheVideo("Javascript Interview Questions"),
      shareTheVideo("Javascript Interview Questions"),
    ])
    .then((res)=>{
      console.log(res);
    })
    .catch((err)=>{
      console.error( "promises failed" ,err);
    });
    
    console.log("stop");
    Promise.allSettled([
      importantAction("Roadside Coder"),
      likeTheVideo("Javascript Interview Questions"),
      shareTheVideo("Javascript Interview Questions"),
    ])
    .then((res)=>{
      console.log(res);
    })
    .catch((err)=>{
      console.error( "promises failed" ,err);
    });
    
    console.log("stop");

    Promise.any([
      importantAction("Roadside Coder"),
      likeTheVideo("Javascript Interview Questions"),
      shareTheVideo("Javascript Interview Questions"),
    ])
    .then((res)=>{
      console.log(res);
    })
    .catch((err)=>{
      console.error( "promises failed" ,err);
    });
    
    console.log("stop");

    // aync & wait
   const result = async () => {
    try {
        const message1 = await importantAction("Roadside Coder");
        const message2 = await likeTheVideo("Javascript Interview Questions");
        const message3 = await shareTheVideo("Javascript Interview Questions");
    
            console.log({message1, message2, message3});
      } catch (err) {
        console.log( "promise failed" ,err);
      }
};
  
result();
    







    


  






    </script>
</body>
</html>